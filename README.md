# 🏃 クラウチングスタート姿勢分析プロ

![クラウチング分析アプリ](https://github.com/user-attachments/assets/07d99a99-f4db-4f87-86e8-dce6d67d6385)

**チーム共有対応・本格的なクラウチング姿勢分析ウェブアプリケーション**

## ✨ 主な機能

### 🖼️ **画像処理機能**
- 📁 **ドラッグ&ドロップアップロード**
- 🔄 **複数画像形式対応** (JPG, PNG, WEBP)
- 📏 **リアルタイム画像プレビュー**
- 🔧 **画像サイズ自動調整**
- 🤖 **AI姿勢推定** (MediaPipe対応)

### 📐 **関節角度分析機能**
- 🎯 **対話的関節点配置** (クリック&ドラッグ)
- ⚡ **リアルタイム角度計算**
- 📊 **視覚的角度表示** (角度線描画)
- 🦴 **複数関節点対応** (膝、足首、股関節)
- 🔢 **4つの調整モード**:
  - ❶ クリック選択
  - ❷ 方向キー調整  
  - ❸ プルダウン選択
  - ❹ 一括表示

### 🎨 **ユーザーインターフェース**
- 📱 **レスポンシブデザイン** (Bootstrap 5)
- 🖱️ **直感的操作** (ワンクリック関節点設定)
- 📈 **Chart.js結果グラフ表示**
- 💾 **結果画像ダウンロード機能**
- 🔗 **チーム共有URL対応**

### ⚡ **パフォーマンス**
- 🚀 **高速画像処理** (OpenCV最適化)
- 🪶 **軽量ライブラリ構成**
- 🛡️ **堅牢なエラーハンドリング**
- 🌐 **Render.com最適化**

## 🚀 デプロイ方法

### **Render.com自動デプロイ**
1. このリポジトリをRender.comに接続
2. 以下の設定を使用:
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `gunicorn app:app`
   - **Python Version**: `3.11.9`

### **ローカル開発環境**
```bash
# 1. リポジトリクローン
git clone https://github.com/kotor-1/crouch-analyzer-pro.git
cd crouch-analyzer-pro

# 2. 依存関係インストール
pip install -r requirements.txt

# 3. アプリケーション起動
python app.py

# 4. ブラウザでアクセス
# http://localhost:5000
```

### **依存関係**
```
Flask==3.0.0                    # ウェブフレームワーク
opencv-python-headless>=4.8.1   # 画像処理（軽量版）
Pillow>=10.0.1                  # 画像操作
numpy>=1.24.3                   # 数値計算
Werkzeug==2.3.7                 # WSGI utilities
gunicorn==21.2.0                # プロダクション用サーバー
mediapipe>=0.10.5               # AI姿勢推定（オプション）
```

## 📱 使用方法

### **基本操作**
1. **画像アップロード** → ドラッグ&ドロップまたはクリックで選択
2. **AI姿勢推定** → 自動で関節点検出（MediaPipe利用時）
3. **関節点調整** → 4つのモードから選択して微調整
4. **分析実行** → セット姿勢・飛び出し分析を選択
5. **結果確認** → 角度グラフ表示＆画像ダウンロード

### **分析モード**
- **🏃 セット姿勢分析**: 前足膝角度、後足膝角度、股関節角度
- **🚀 飛び出し分析**: 下半身角度、上半身角度、くの字角度

### **関節点調整モード**
- **❶ クリック選択**: 関節点選択→画像クリックで移動
- **❷ 方向キー調整**: 方向ボタンで精密移動
- **❸ プルダウン選択**: ドロップダウンから関節点選択
- **❹ 一括表示**: 全関節点を同時表示・調整

## 🔧 技術仕様

### **バックエンド**
- **Framework**: Flask 3.0.0
- **Image Processing**: OpenCV + Pillow
- **AI**: MediaPipe (条件付き)
- **Math**: NumPy
- **Production**: Gunicorn

### **フロントエンド**
- **UI Framework**: Bootstrap 5
- **Visualization**: Chart.js
- **Interactions**: JavaScript ES6+
- **Responsive**: Mobile-first design

### **デプロイ環境**
- **Platform**: Render.com
- **Python**: 3.11.9
- **Auto-scaling**: 無料プランで15分スリープ対応
- **HTTPS**: 自動対応

## 🧪 テスト

```bash
# アプリケーション起動後、別ターミナルで実行
python test_app.py
```

## 🎯 特徴

このアプリの最大の特徴は**画像上で直接クリックして関節点を移動**できることです！
- 🎯 **直感的操作**: ワンクリックで関節点配置
- 📊 **リアルタイム分析**: 関節点移動と同時に角度更新  
- 🔗 **チーム共有**: URL共有でチームメンバーと結果共有
- 📱 **マルチデバイス**: PC・スマホ・タブレット対応

## 📞 サポート

- **開発者**: kotor-1
- **ライセンス**: MIT
- **更新日**: 2025年8月5日
- **バージョン**: 1.0.0

---

**🎉 本格的なクラウチング分析ツールをお楽しみください！**
